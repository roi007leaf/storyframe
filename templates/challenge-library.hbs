<div class="library-content">
  {{#if hasChallenges}}
    {{#each challenges}}
    <div class="lib-challenge-card" data-challenge-id="{{this.id}}">
      <div class="lib-card-header">
        <div class="lib-card-title-section">
          <i class="fas fa-flag-checkered lib-card-icon"></i>
          <span class="lib-card-title">{{this.name}}</span>
        </div>
        <div class="lib-card-actions">
          <button type="button" class="lib-edit-btn" data-action="editChallenge" data-challenge-id="{{this.id}}" data-tooltip="Edit challenge">
            <i class="fas fa-edit"></i>
          </button>
          <button type="button" class="lib-delete-btn" data-action="deleteChallenge" data-challenge-id="{{this.id}}" data-tooltip="Delete challenge">
            <i class="fas fa-trash"></i>
          </button>
        </div>
      </div>

      <div class="lib-card-body">
        {{#each this.options}}
        <div class="lib-option-preview">
          <div class="opt-num">Option {{this.index}}</div>
          <div class="opt-desc">{{this.description}}</div>
          <div class="opt-skills">
            {{#each this.skillOptions}}
            <span class="skill-dc-pill">
              {{this.displayText}} <strong>DC {{this.dc}}</strong>
              {{#if this.isSecret}}<i class="fas fa-eye-slash secret-marker"></i>{{/if}}
            </span>
            {{/each}}
          </div>
        </div>
        {{/each}}
      </div>

      <button type="button"
              class="lib-present-btn"
              data-action="presentChallenge"
              data-challenge-id="{{this.id}}">
        <i class="fas fa-paper-plane"></i> Present to All Players
      </button>
    </div>
    {{/each}}
  {{else}}
    <div class="lib-empty-state">
      <i class="fas fa-folder-open"></i>
      <p>No saved challenges</p>
      <p class="hint">Create a challenge and check "Save to library"</p>
    </div>
  {{/if}}
</div>
