<div class="player-viewer-container">
  {{#if pendingRolls.length}}
  <div class="roll-prompts" role="alert" aria-live="polite">
    {{#each pendingRolls}}
      <div class="roll-prompt" data-request-id="{{this.id}}">
        <div class="prompt-content">
          <div class="prompt-header">
            <span class="skill-name">{{this.skillName}}{{#if this.actionName}} - {{this.actionName}}{{/if}}</span>
            {{#if this.dc}}<span class="dc-badge">DC {{this.dc}}</span>{{/if}}
          </div>
          <span class="prompt-text">Check Requested</span>
        </div>
        <button type="button"
                class="roll-btn"
                data-action="executeRoll"
                data-request-id="{{this.id}}"
                aria-label="Roll {{this.skillName}} check">
          <i class="fas fa-dice-d20" aria-hidden="true"></i>
          <span>Roll</span>
        </button>
      </div>
    {{/each}}
  </div>
  {{/if}}

  <div class="speaker-gallery layout-{{layout}}" role="list" aria-label="NPCs">
    {{#if empty}}
      <div class="empty-state compact" role="status">
        <i class="fas fa-hourglass-half" aria-hidden="true"></i>
        <span>Waiting for GM...</span>
      </div>
    {{else}}
      {{#each speakers}}
        <div class="speaker-item {{#if (eq this.id ../activeSpeakerId)}}active{{/if}}"
             role="listitem"
             data-tooltip="{{this.name}}"
             aria-current="{{#if (eq this.id ../activeSpeakerId)}}true{{/if}}">
          <img src="{{this.img}}" alt="{{this.name}}" loading="lazy">
          <span class="speaker-name">{{this.name}}</span>
        </div>
      {{/each}}
    {{/if}}
  </div>
</div>
