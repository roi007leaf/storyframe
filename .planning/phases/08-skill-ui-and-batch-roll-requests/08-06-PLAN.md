---
phase: 08-skill-ui-batch-rolls
plan: 06
type: execute
wave: 3
depends_on: ["08-01", "08-02", "08-03", "08-04", "08-05"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All Phase 8 success criteria verified by human testing"
    - "UI looks polished and functions correctly in live play scenario"
---

<objective>
Visual and functional verification checkpoint for all Phase 8 features.

Purpose: Ensure all skill UI improvements, batch roll requests, proficiency filtering, and challenge management features work correctly in an integrated fashion before marking the phase complete.

Output: Human verification of all success criteria with approval or issue list.
</objective>

<execution_context>
@C:\Users\User\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\User\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/08-skill-ui-and-batch-roll-requests/08-CONTEXT.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Phase 8: Skill UI & Batch Roll Requests - Complete feature set:

1. **Skill Grid Layout** (Plan 01)
   - CSS Grid auto-fill with ~4 skills per row
   - Category groupings: Physical, Magical, Social, Utility
   - Empty categories hidden completely
   - Display order: Journal Checks -> Lore Skills -> Quick Skills

2. **Multi-Skill Selection** (Plan 02)
   - Shift+click to select/deselect skills
   - Lore skills aggregate across all selected PCs
   - Selection clears when participants change
   - Visual highlight on selected skills

3. **Challenge Management** (Plan 03)
   - Unique challenge names enforced
   - Collapsible/expandable challenge headers
   - Status summary in collapsed state

4. **Proficiency Filtering** (Plan 04)
   - Per-skill proficiency filter (T+, E+, M+, L+)
   - Filter dropdown on icon click
   - Badge shows active filter on skill button

5. **Batch Roll Requests** (Plan 05)
   - Request rolls for multiple skills at once
   - Each player only prompted for skills they possess
   - Proficiency filters applied per participant
  </what-built>

  <how-to-verify>
**Test Setup:**
1. Open FoundryVTT with StoryFrame module
2. Create or use existing 3+ PCs with varied skill proficiencies
3. Ensure at least one PC has a unique lore skill others don't have
4. Open a journal with some PF2e inline checks

**Verification Checklist:**

[ ] **Grid Layout (SC-1, SC-10)**
    - Open GM sidebar
    - Verify skill buttons are approximately 4 per row (may vary with width)
    - Verify no horizontal scrollbar/overflow
    - Resize window - verify grid reflows responsively

[ ] **Skill Grouping (SC-2)**
    - Verify category headers: Physical, Magical, Social, Utility
    - Verify Stealth and Thievery are in Physical (not separate)
    - Verify Perception is in Utility
    - Verify "Mental" category does NOT exist (renamed to Magical)

[ ] **Display Order (SC-3)**
    - Verify order from top to bottom:
      1. Journal Checks (if journal has inline checks)
      2. Lore Skills (if PCs have lore skills)
      3. Quick Skill Buttons (categorized)

[ ] **Empty Category Hiding (SC-1)**
    - With no PCs selected, verify empty Lore Skills section is completely hidden (no header, no gap)
    - If a category has no skills visible, verify it's hidden

[ ] **Lore Skills Aggregation (SC-4)**
    - Select 2+ PCs with different lore skills
    - Verify Lore Skills section shows ALL their lore skills combined
    - Verify skills are sorted alphabetically

[ ] **Multi-Skill Selection (SC-5)**
    - Select at least one participant
    - Shift+click on a skill - verify it highlights
    - Shift+click on another skill - verify both highlighted
    - Shift+click on highlighted skill - verify it deselects
    - Verify batch request bar appears showing count
    - Click Clear button - verify all selections cleared

[ ] **Selection Blocked Without Participants**
    - Clear all participants
    - Try to shift+click a skill
    - Verify warning: "Select participants first"

[ ] **Selection Clears on Participant Change**
    - Select skills (with participants selected)
    - Change participant selection (add or remove)
    - Verify skill selections cleared with notification

[ ] **Proficiency Filters (SC-6)**
    - Click filter icon (funnel) on any skill
    - Verify dropdown appears with: Any, Trained+, Expert+, Master+, Legendary+
    - Select "Expert+"
    - Verify badge "E+" appears on that skill button
    - Select different filter on different skill
    - Verify each skill has independent filter

[ ] **Batch Roll Request**
    - Select 2+ participants with varied proficiencies
    - Select 2+ skills, set proficiency filter on one
    - Set a DC value
    - Click "Request Roll(s)"
    - Verify notification shows sent count
    - Check player clients - verify correct prompts received

[ ] **Challenge Uniqueness (SC-7)**
    - Create a challenge named "Test Challenge"
    - Try to create another challenge with same name
    - Verify error: `Challenge "Test Challenge" already exists`

[ ] **Multiple Named Challenges (SC-8)**
    - Create challenge "Alpha"
    - Create challenge "Beta" (different name)
    - Verify both can be active (or first is replaced - depends on current implementation)

[ ] **Collapsible Challenge Headers (SC-9)**
    - With active challenge, click anywhere on challenge header
    - Verify challenge content collapses
    - Verify "Challenge active" summary appears
    - Click header again - verify it expands

**Expected Behavior Notes:**
- Grid should target ~4 skills per row at 330px sidebar width
- Proficiency badges are small (T+, E+, M+, L+)
- Batch requests are atomic (one click sends all)
- Challenge names must be unique (exact match)
  </how-to-verify>

  <resume-signal>
Reply with one of:
- "approved" - All checks pass, Phase 8 complete
- List specific issues found that need fixing (will create gap closure plan)
  </resume-signal>
</task>

</tasks>

<verification>
Human verification checkpoint - no automated verification for this plan.
</verification>

<success_criteria>
All Phase 8 success criteria verified by human tester:
1. Empty skill category headers are hidden
2. Skills grouped correctly (Stealth/Thievery in Physical, Mental->Magical, Perception in Utility)
3. Display order preserved (Journal Checks -> Lore Skills -> Quick Skills)
4. Multi-PC selection aggregates all skills
5. GM can select multiple skills for batch roll request
6. Each skill supports per-skill proficiency filter
7. Only one active challenge per unique name
8. Multiple different named challenges can be active simultaneously
9. Challenge headers are collapsible/expandable
10. Grid density targets 4 skills per row
</success_criteria>

<output>
After completion, create `.planning/phases/08-skill-ui-and-batch-roll-requests/08-06-SUMMARY.md` with verification results.
</output>
