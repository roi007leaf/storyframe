---
phase: 02-gm-interface
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - templates/gm-interface.hbs
  - styles/gm-interface.css
  - module.json
autonomous: true

must_haves:
  truths:
    - "Template renders split-pane layout (journal left, gallery right)"
    - "CSS produces responsive thumbnail grid"
    - "Active speaker has distinct visual highlight"
  artifacts:
    - path: "templates/gm-interface.hbs"
      provides: "GM window Handlebars template"
      contains: "split-container"
    - path: "styles/gm-interface.css"
      provides: "Window styling with CSS Grid gallery"
      contains: ".speaker-gallery"
    - path: "module.json"
      provides: "Style registration"
      contains: "styles/gm-interface.css"
  key_links:
    - from: "module.json"
      to: "styles/gm-interface.css"
      via: "styles array"
      pattern: '"styles/gm-interface.css"'
---

<objective>
Create GM interface template and CSS for split-pane layout.

Purpose: Provides UI foundation for ApplicationV2 window
Output: Template with journal/gallery sections, CSS with responsive grid and active states
</objective>

<execution_context>
@/Users/roihorowitz/.claude/get-shit-done/workflows/execute-plan.md
@/Users/roihorowitz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-gm-interface/02-RESEARCH.md (patterns 2, 5, 6)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Handlebars template</name>
  <files>templates/gm-interface.hbs</files>
  <action>
Create template with split-pane structure:

1. Outer `.split-container` div with flexbox
2. Left `.journal-pane`:
   - `.journal-selector` with label + select (name="journal", data-action="selectJournal")
   - Empty option "-- Select Journal --"
   - `{{selectOptions journals selected=selectedJournal}}` for journal options
   - `.journal-content` div with `{{{journalContent}}}` or empty state
3. `.resize-handle` div between panes
4. Right `.gallery-pane`:
   - `.gallery-header` with h3 "Speakers" + two buttons:
     - data-action="addSpeakerFromImage" with plus icon
     - data-action="clearSpeaker" with times icon
   - `.speaker-gallery` div:
     - `{{#if hasSpeakers}}` ... `{{else}}` empty state `{{/if}}`
     - Each speaker: `.speaker-thumbnail` div with:
       - `{{#if (eq ../activeSpeaker this.id)}}active{{/if}}` class
       - `{{#if this.actorDeleted}}deleted{{/if}}` class
       - data-action="setSpeaker" data-speaker-id="{{this.id}}"
       - img src="{{this.img}}" alt="{{this.name}}"
       - `.speaker-name` div with {{this.name}}
       - `.remove-speaker` button with data-action="removeSpeaker"

Empty states should include helpful instructions.
  </action>
  <verify>File exists at templates/gm-interface.hbs, contains split-container and speaker-gallery classes</verify>
  <done>Template has journal selector, journal content area, resize handle, speaker gallery with active state conditional</done>
</task>

<task type="auto">
  <name>Task 2: Create CSS and register in manifest</name>
  <files>styles/gm-interface.css, module.json</files>
  <action>
Create CSS file with:

1. `.split-container`: display: flex, height: 100%
2. `.journal-pane`: flex: 0 0 450px, overflow-y: auto, padding: 1rem
3. `.journal-content`: padding: 0.5rem
4. `.resize-handle`: flex: 0 0 4px, background: var(--color-border-dark), cursor: col-resize, hover state
5. `.gallery-pane`: flex: 1, overflow-y: auto, padding: 1rem
6. `.gallery-header`: display: flex, justify-content: space-between, align-items: center, margin-bottom: 1rem
7. `.speaker-gallery`:
   - display: grid
   - grid-template-columns: repeat(auto-fill, minmax(100px, 1fr))
   - gap: 0.75rem
   - min-height: 100px (for drag-drop target)
8. `.speaker-gallery.drag-over`: border: 2px dashed var(--color-border-highlight)
9. `.speaker-thumbnail`:
   - position: relative, cursor: pointer
   - border: 2px solid transparent, border-radius: 4px
   - transition: all 0.2s
   - hover: border-color highlight, transform: scale(1.03)
10. `.speaker-thumbnail.active`:
    - border-color: var(--color-text-hyperlink)
    - box-shadow: 0 0 8px var(--color-shadow-highlight)
11. `.speaker-thumbnail.deleted`: opacity: 0.6
12. `.speaker-thumbnail img`: width: 100%, aspect-ratio: 1, object-fit: cover, border-radius: 4px
13. `.speaker-name`: text-align: center, font-size: 0.8rem, overflow: hidden, text-overflow: ellipsis, white-space: nowrap
14. `.remove-speaker`:
    - position: absolute, top: 4px, right: 4px
    - background: rgba(0,0,0,0.7), color: white
    - width: 20px, height: 20px, border-radius: 50%
    - opacity: 0, transition: opacity 0.2s
    - Show on thumbnail hover
15. `.empty-state`: text-align: center, color: var(--color-text-dark-secondary), padding: 2rem

Update module.json: Add "styles": ["styles/gm-interface.css"] to manifest.
  </action>
  <verify>styles/gm-interface.css exists with .speaker-gallery and .speaker-thumbnail.active selectors; module.json contains styles array with gm-interface.css</verify>
  <done>CSS has grid gallery, active highlight, resize handle cursor; manifest registers stylesheet</done>
</task>

</tasks>

<verification>
- [ ] templates/gm-interface.hbs exists with split-container layout
- [ ] styles/gm-interface.css exists with responsive grid and active states
- [ ] module.json includes styles array referencing gm-interface.css
</verification>

<success_criteria>
Template and CSS ready for ApplicationV2 class to use. No JavaScript yet - that's Plan 02-02.
</success_criteria>

<output>
After completion, create `.planning/phases/02-gm-interface/02-01-SUMMARY.md`
</output>
